   name: WebDriverIO Tests

   on:
     push:
       branches:
         - main
     pull_request:
       branches:
         - main

   jobs:
     tests:
       runs-on: ubuntu-latest
       services:
         selenium:
           image: selenium/standalone-chrome:latest
           options: --shm-size=2g

       steps:
       - name: Checkout code
         uses: actions/checkout@v2

       - name: Set up Node.js
         uses: actions/setup-node@v2
         with:
           node-version: '18'

       - name: Install dependencies
         run: |
           npm cache clean --force
           npm install

       - name: Give execution permissions to wdio
         run: chmod +x ./node_modules/.bin/wdio

       - name: Install WebDriverIO globally
         run: npm install -g wdio-cli

       - name: Verify installed packages
         run: ls -l ./node_modules/.bin

       - name: Run WebDriverIO tests
         run: |
           npx wdio run wdio.conf.ts

       - name: Generate Allure report
         run: |
          npm install allure-commandline --save-dev  # Instala Allure si es necesario
          npx allure generate allure-results --clean  # Genera el reporte de Allure

       - name: Upload Allure report as artifact
         uses: actions/upload-artifact@v3
         with:
           name: allure-report
           path: allure-report  # Subir el reporte generado como artefacto